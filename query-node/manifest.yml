version: '0.1'
description: Joystream query-node manifest file for sumer
repository: https://github.com/Joystream/joystream
dataSource:
  kind: substrate
  chain: joystream
  indexerVersion: '0.1.6'
entities:
  - mappings/lib/generated/**/*.model.js
typegen:
  metadata:
    source: wss://sumer.joystream.app
  events:
    - members.MemberRegistered
    - members.MemberUpdatedAboutText
    - members.MemberUpdatedAvatar
    - members.MemberUpdatedHandle
    - members.MemberSetRootAccount
    - members.MemberSetControllerAccount
  calls:
    - members.buyMembership
    - members.addScreenedMember
    - members.changeMemberAboutText
    - members.changeMemberAvatar
    - members.changeMemberHandle
    - members.setRootAccount
    - members.setControllerAccount
  outDir: ./generated/types
  customTypes:
    lib: '@joystream/types/augment/all/types'
    typedefsLoc: '../types/augment/all/defs.json'
mappings:
  hydraCommonVersion: '0.0.3'
    # process only blocks with height >= 1M
  blockInterval: '[1000000,]'
  # js module that exports the handler functions
  mappingsModule: mappings/lib/mappings
  # additinal libraries the processor loads
  # typically it is a module with event and extrinsic types generated by hydra-typegen
  imports:
    - mappings/lib/mappings/generated/types
  eventHandlers:
    - event: members.MemberRegistered
      handler: members_MemberRegistered(DatabaseManager, SubstrateEvent)
    - event: members.MemberUpdatedAboutText
      handler: members_MemberUpdatedAboutText(DatabaseManager, SubstrateEvent)
    - event: members.MemberUpdatedAvatar
      handler: members_MemberUpdatedAvatar(DatabaseManager, SubstrateEvent)
    - event: members.MemberUpdatedHandle
      handler: members_MemberUpdatedHandle(DatabaseManager, SubstrateEvent)
    - event: members.MemberSetRootAccount
      handler: members_MemberSetRootAccount(DatabaseManager, SubstrateEvent)
    - event: members.MemberSetControllerAccount
      handler: members_MemberSetControllerAccount(DatabaseManager, SubstrateEvent)
  extrinsicHandlers:
    # infer defaults here
    #- extrinsic: Balances.Transfer
    #- extrinsic: Sudo.batchCall
    #  handler: handleSudoCall(DatabaseManager,SubstrateEvent)
  preBlockHooks:
  postBlockHooks:
