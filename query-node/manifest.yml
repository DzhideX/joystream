version: '0.1'
dataSource:
  kind: substrate 
  chain: joystream
  indexerVersion: '0.1.6'
metadata:
  source: wss://babylon-sub-1.joystream.app/staging/rpc
  blockHash: '0x206a6cca31333cb19ee120cde7455e13eea368ec3f6176d0cd48698228410489'
events:
  - members.MemberRegistered
  - members.MemberUpdatedAboutText
  - members.MemberUpdatedAvatar
  - members.MemberUpdatedHandle
  - members.MemberSetRootAccount
  - members.MemberSetControllerAccount
calls:
  - members.buyMembership
  - members.addScreenedMember
outDir: ./generated/types
customTypes:
  lib: '@joystream/types/augment/all/types'
  typedefsLoc: '../types/augment/all/defs.json'
entities:
  - mappings/lib/generated/**/*.model.js

mappings:
  hydraCommonVersion: '0.0.3'
    # process only blocks with height >= 1M 
  blockInterval: '[1000000,]'
  # js module that exports the handler functions 
  mappingsModule: mappings/lib/mappings
  # additinal libraries the processor loads
  # typically it is a module with event and extrinsic types generated by hydra-typegen 
  imports:
    - mappings/lib/mappings/generated/types
  eventHandlers:
    - event: members.MemberRegistered
      handler: members_MemberRegistered(DatabaseManager, SubstrateEvent)
    - event: members.MemberUpdatedAboutText
      handler: members_MemberUpdatedAboutText(DatabaseManager, SubstrateEvent)
    - event: members.MemberUpdatedAvatar
      handler: members_MemberUpdatedAvatar(DatabaseManager, SubstrateEvent)
    - event: members.MemberUpdatedHandle
      handler: members_MemberUpdatedHandle(DatabaseManager, SubstrateEvent)
    - event: members.MemberSetRootAccount
      handler: members_MemberSetRootAccount(DatabaseManager, SubstrateEvent)
    - event: members.MemberSetControllerAccount
      handler: members_MemberSetControllerAccount(DatabaseManager, SubstrateEvent)
  extrinsicHandlers:
    # infer defaults here
    #- extrinsic: Balances.Transfer 
    #- extrinsic: Sudo.batchCall 
    #  handler: handleSudoCall(DatabaseManager,SubstrateEvent)
  preBlockHooks:
  postBlockHooks: